!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.React.tagify=t()}(this,(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.MixedTags=void 0;var e,t=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}n.default=e,r&&r.set(e,n);return n}(require("react")),r=require("react-dom/server"),n=require("prop-types"),o=(e=require("./tagify.min.js"))&&e.__esModule?e:{default:e};const u=["children"];function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const s=e=>e;const c=e=>{let n=e.name,u=e.value,i=void 0===u?"":u,a=e.loading,l=void 0!==a&&a,c=e.onInput,f=void 0===c?s:c,d=e.onAdd,p=void 0===d?s:d,g=e.onRemove,y=void 0===g?s:g,v=e.onEdit,O=void 0===v?s:v,h=e.onInvalid,m=void 0===h?s:h,b=e.onClick,w=void 0===b?s:b,j=e.onKeydown,E=void 0===j?s:j,x=e.onFocus,M=void 0===x?s:x,k=e.onBlur,P=void 0===k?s:k,N=e.onChange,R=void 0===N?s:N,T=e.readOnly,C=e.children,S=e.settings,I=void 0===S?{}:S,_=e.InputMode,D=void 0===_?"input":_,F=e.autoFocus,q=e.className,V=e.whitelist,J=e.tagifyRef,W=e.placeholder,A=void 0===W?"":W,B=e.defaultValue,K=e.showDropdown;const z=(0,t.useRef)(),G=(0,t.useRef)(),H=(0,t.useRef)(),L=e=>{G.current=e},Q=(0,t.useMemo)((()=>({ref:L,name:n,value:C||("string"==typeof i?i:JSON.stringify(i)),className:q,readOnly:T,onChange:R,autoFocus:F,placeholder:A,defaultValue:B})),[]),U=(0,t.useCallback)((()=>{F&&H.current&&H.current.DOM.input.focus()}),[H]);return(0,t.useEffect)((()=>{!function(e){if(e)for(let n in e)if(String(e[n]).includes(".createElement")){let o=e[n];e[n]=e=>(0,r.renderToStaticMarkup)(t.default.createElement(o,e))}}(I.templates),"textarea"==D&&(I.mode="mix"),V&&V.length&&(I.whitelist=V);const e=new o.default(G.current,I);return f&&e.on("input",f),p&&e.on("add",p),y&&e.on("remove",y),O&&e.on("edit",O),m&&e.on("invalid",m),E&&e.on("keydown",E),M&&e.on("focus",M),P&&e.on("blur",P),w&&e.on("click",w),J&&(J.current=e),H.current=e,U(),()=>{e.destroy()}}),[]),(0,t.useEffect)((()=>{U()}),[F]),(0,t.useEffect)((()=>{z.current&&(H.current.settings.whitelist.length=0,V&&V.length&&H.current.settings.whitelist.push(...V))}),[V]),(0,t.useEffect)((()=>{var e,t;z.current&&(e=i,t=H.current.value,JSON.stringify(e)!=JSON.stringify(t))&&H.current.loadOriginalValues(i)}),[i]),(0,t.useEffect)((()=>{z.current&&H.current.toggleClass(q)}),[q]),(0,t.useEffect)((()=>{z.current&&H.current.loading(l)}),[l]),(0,t.useEffect)((()=>{z.current&&H.current.setReadonly(T)}),[T]),(0,t.useEffect)((()=>{const e=H.current;z.current&&(K?(e.dropdown.show.call(e,K),e.toggleFocusClass(!0)):e.dropdown.hide.call(e))}),[K]),(0,t.useEffect)((()=>{z.current=!0}),[]),t.default.createElement("div",{className:"tags-input"},t.default.createElement(D,Q))};c.propTypes={name:n.string,value:(0,n.oneOfType)([n.string,n.array]),loading:n.bool,children:n.element,onChange:n.func,readOnly:n.bool,settings:n.object,InputMode:n.string,autoFocus:n.bool,className:n.string,tagifyRef:n.object,whitelist:n.array,placeholder:n.string,defaultValue:(0,n.oneOfType)([n.string,n.array]),showDropdown:(0,n.oneOfType)([n.string,n.bool])};const f=t.default.memo(c);f.displayName="Tags";exports.MixedTags=e=>{let r=e.children,n=l(e,u);return t.default.createElement(f,a({InputMode:"textarea"},n),r)};exports.default=f;return f}));